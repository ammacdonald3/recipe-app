{% extends "layout.html" %}
{% block nav_recipes %}
active
{% endblock %}

{% block heading %}
All Recipes
{% endblock %}

{% block body %}
<br>

<!-- Accordion functionality for user's recipes -->
<div class="container">
  <div id="accordion">

    <!-- Card #1: User's "Favorites" recipes -->
    <div class="card" data-toggle="collapse" data-target="#collapseOne">
      <div class="card-header text-center" id="headingOne">
        <h4 class="mb-0">
          Favorites
          <!-- Badge displaying total number of recipes in this section -->
          <span class="badge badge-light">{{ fav_length }}</span>
          <span class="sr-only">favorite recipes</span>
        </h4>
      </div>

      <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
        <div class="card-body">
          {% if fav_exists == True %}

          <ul class="list-unstyled">
            {% for recipe in favorite_recipe_list %}

            <!-- Recipe Name -->
            <li>
              <h3 class="text-center">{{ recipe.Recipe.recipe_name }}</h3>
                <a href="{{ url_for('recipe_detail', recipe_id=recipe.Recipe.recipe_id) }}"
                >
              <!-- Recipe Image -->
              {% if recipe.Recipe.recipe_image_url != None %}
              <img id="preview" src="{{ recipe.Recipe.recipe_image_url}}" class="center img-fluid small-image" alt="Responsive image"
               />
              {% else %}
              <img id="preview" src="/static/placeholder-recipe-image.jpg" class="center img-fluid small-image" alt="Responsive image"
               />
              {% endif %}
              </a>


              <div class="form-group">
                <!-- Display button so that user can view recipe's page -->
                <div class="row" style="padding-top: 20px;">
                  <div class="form-group col-sm">
                    <a href="{{ url_for('recipe_detail', recipe_id=recipe.Recipe.recipe_id) }}"
                      class="btn btn-primary btn-block">View Recipe</a>
                  </div>
              
                <!-- Display button so that user can view recipe's source website -->
                  <div class="form-group col-sm">
                    <a href="https://{{ recipe.Recipe.recipe_url }}" target="_blank"
                      class="btn btn-primary btn-block">Source
                      Website</a>
                  </div>
                </div>
              </div>

            </li>
            <hr class="recipe-list-hr"/>
            {% endfor %}

          </ul>

          <!-- If user doesn't have any Favorites, display placeholder message -->
          {% else %}
          <h5 class="text-center">You haven't favorited any recipes yet. Try adding one!</h5>
          {% endif %}

        </div>
      </div>
    </div>

    <!-- Card #2: All of user's uploaded recipes -->
    <div class="card" data-toggle="collapse" data-target="#collapseTwo">
      <div class="card-header text-center" id="headingTwo">
        <h4 class="mb-0">
          <!-- <button class="btn btn-link collapsed" aria-expanded="false" aria-controls="collapseTwo"> -->
          My Recipes
          <!-- </button> -->
          <!-- Badge displaying total number of recipes in this section -->
          <span class="badge badge-light">{{ your_length }}</span>
          <span class="sr-only">recipes uploaded by you</span>
        </h4>
      </div>
      <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
        <div class="card-body">
            {% if your_exists == True %}

            <ul class="list-unstyled">
              {% for recipe in your_recipe_list %}
  
              <!-- Recipe Name -->
              <li>
                <h3 class="text-center">{{ recipe.recipe_name }}</h3>
                  <a href="{{ url_for('recipe_detail', recipe_id=recipe.recipe_id) }}"
                  >
                <!-- Recipe Image -->
                {% if recipe.recipe_image_url != None %}
                <img id="preview" src="{{ recipe.recipe_image_url}}" class="center img-fluid small-image" alt="Responsive image"
                 />
                {% else %}
                <img id="preview" src="/static/placeholder-recipe-image.jpg" class="center img-fluid small-image" alt="Responsive image"
                 />
                {% endif %}
                </a>
  
  
                <div class="form-group">
                  <!-- Display button so that user can view recipe's page -->
                  <div class="row" style="padding-top: 20px;">
                    <div class="form-group col-sm">
                      <a href="{{ url_for('recipe_detail', recipe_id=recipe.recipe_id) }}"
                        class="btn btn-primary btn-block">View Recipe</a>
                    </div>
                
                  <!-- Display button so that user can view recipe's source website -->
                    <div class="form-group col-sm">
                      <a href="https://{{ recipe.recipe_url }}" target="_blank"
                        class="btn btn-primary btn-block">Source
                        Website</a>
                    </div>
                  </div>
                </div>
  
              </li>
              <hr class="recipe-list-hr"/>
              {% endfor %}
  
            </ul>
  
            <!-- If user hasn't uploaded any recipes, display placeholder message -->
            {% else %}
            <h5 class="text-center">You haven't uploaded any recipes yet. Try adding one!</h5>
            {% endif %}
        </div>
      </div>
    </div>

    <!-- Card #3: All other users' uploaded recipes -->
    <div class="card" data-toggle="collapse" data-target="#collapseThree">
      <div class="card-header text-center" id="headingThree">
        <h4 class="mb-0">
          <!-- <button class="btn btn-link collapsed" aria-expanded="false" aria-controls="collapseThree"> -->
          Uploaded by Others
          <!-- </button> -->
          <!-- Badge displaying total number of recipes in this section -->
          <span class="badge badge-light">{{ other_length }}</span>
          <span class="sr-only">recipes uploaded by others</span>
        </h4>
      </div>
      <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
        <div class="card-body">
            {% if other_exists == True %}

            <ul class="list-unstyled">
              {% for recipe in other_recipe_list %}
  
              <!-- Recipe Name -->
              <li>
                <h3 class="text-center">{{ recipe.recipe_name }}</h3>
                  <a href="{{ url_for('recipe_detail', recipe_id=recipe.recipe_id) }}"
                  >
                <!-- Recipe Image -->
                {% if recipe.recipe_image_url != None %}
                <img id="preview" src="{{ recipe.recipe_image_url}}" class="center img-fluid small-image" alt="Responsive image"
                 />
                {% else %}
                <img id="preview" src="/static/placeholder-recipe-image.jpg" class="center img-fluid small-image" alt="Responsive image"
                 />
                {% endif %}
                </a>
  
  
                <div class="form-group">
                  <!-- Display button so that user can view recipe's page -->
                  <div class="row" style="padding-top: 20px;">
                    <div class="form-group col-sm">
                      <a href="{{ url_for('recipe_detail', recipe_id=recipe.recipe_id) }}"
                        class="btn btn-primary btn-block">View Recipe</a>
                    </div>
                
                  <!-- Display button so that user can view recipe's source website -->
                    <div class="form-group col-sm">
                      <a href="https://{{ recipe.recipe_url }}" target="_blank"
                        class="btn btn-primary btn-block">Source
                        Website</a>
                    </div>
                  </div>
                </div>
  
              </li>
              <hr class="recipe-list-hr"/>
              {% endfor %}
  
            </ul>
  
            <!-- If no one else has uploaded any recipes, display placeholder message -->
            {% else %}
          <h5 class="text-center">No one else has uploaded any recipes yet!</h5>
          {% endif %}
        </div>
      </div>
    </div>
  </div>


</div>


{% endblock %}