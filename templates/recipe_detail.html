{% extends "layout.html" %}
{% block nav_recipes %}
active
{% endblock %}

{% block heading %}
{{ recipe.recipe_name }}
<!-- <div class="click">
  <span class="fa fa-star-o"></span>
  <div class="ring"></div>
  <div class="ring2"></div>
  <p class="info">Added to favourites!</p>
</div> -->
{% endblock %}

{% block body %}
<!-- <div class="click" id="title">

  <h2><span class="fa fa-star-o">{{ recipe.recipe_name }}</span></h2>
  <div class="ring"></div>
  <div class="ring2"></div>
  <p class="info">Added to favourites!</p>
</div> -->


<div class="container">
  <!-- IMPORTANT NOTE FOR REFERENCE: -->
  <!-- In the below query, the 'recipe.recipe.app_username' references the variable from the app.py DB query plus the name of the backref relationship in models.py! -->
  <p>Uploaded by {{ recipe.recipe.first_name }} {{ recipe.recipe.last_name }}</p>
  <div class="container">
    <div class="form-group">
      <div class="row" style="padding-top: 20px;">
        <div class="form-group col-sm">
          <form role="form" method="POST" id="favorite_form" name="favorite_form">
            <button type="submit" id="favorite_submit" name="favorite_submit" class="btn btn-block 
            {% if favorite == None %}
              btn-primary">Add to Favorites
              {% else %}
              btn-danger">Remove from Favorites
              {% endif %}</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <br>

  <!-- <div class="center-cropped img-fluid center" style="background-image: url('{% if recipe.recipe_image_url != None %}{{ recipe.recipe_image_url}}{% else %}/static/placeholder-recipe-image.jpg{% endif %}');"> -->
  <!-- https://images.unsplash.com/photo-1546548970-71785318a17b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2468&q=80');"> -->


  <div class="image-container center">
    {% if recipe.recipe_image_url != None %}
    <img id="preview" src="{{ recipe.recipe_image_url}}" class="center img-fluid" alt="Responsive image" />
    {% else %}
    <img id="preview" src="/static/placeholder-recipe-image.jpg" class="center img-fluid" alt="Responsive image" />
    {% endif %}


    <!-- <div class="center-cropped" 
    {% if recipe.recipe_image_url != None %}
    style="background-image: url('{{ recipe.recipe_image_url}}');">
    <img src="{{ recipe.recipe_image_url}}" />-->
    <!-- <img id="preview" src="" class="center"/> -->
    <!-- {% else %}
    style="background-image: url('/static/placeholder-recipe-image.jpg');">
    <img src="/static/placeholder-recipe-image.jpg" />     -->
    <!-- <img id="preview" src="/static/placeholder-recipe-image.jpg" class="center"/> -->
    <!--{% endif %}
    </div> -->
  </div>
  <br>
  <br>

  <p>{{ recipe.recipe_desc }}</p>



  <br>
</div>


<div class="container">
  <!-- Header info (cook time, etc.) -->
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Prep Time</th>
        <th scope="col">Cook Time</th>
        <th scope="col">Total Time</th>
        <th scope="col">Servings</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ recipe.recipe_prep_time}}</td>
        <td>{{ recipe.recipe_cook_time }}</td>
        <td>{{ recipe.recipe_total_time }}</td>
        <td>{{ recipe.serving_size }}</td>
      </tr>
    </tbody>
  </table>

  <br>
  <br>

  <div class="row">
    <!-- Dietary Restrictions -->
    <div class="form-group col-md">
      <h4>Dietary Restrictions:</h4>
      <table class="table">
        <tbody>
          <tr>
            <th scope="row">Vegan</th>
            <td>{% if recipe.diet_vegan == True %} <i class="fas fa-check"></i> {% else %} <i
                class="fas fa-times error"></i>{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Vegetarian</th>
            <td>{% if recipe.diet_vegetarian == True %} <i class="fas fa-check"></i> {% else %} <i
                class="fas fa-times error"></i>{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Gluten-free</th>
            <td>{% if recipe.diet_gluten == True %} <i class="fas fa-check"></i> {% else %} <i
                class="fas fa-times error"></i>{% endif %}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Meal Time -->
    <div class="form-group col-md">
      <h4>Meal Time:</h4>
      <table class="table">
        <tbody>
          <tr>
            <th scope="row">Breakfast</th>
            <td>{% if recipe.meal_breakfast == True %} <i class="fas fa-check"></i> {% else %} <i
                class="fas fa-times error"></i>{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Lunch</th>
            <td>{% if recipe.meal_lunch == True %} <i class="fas fa-check"></i> {% else %} <i
                class="fas fa-times error"></i>{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Dinner</th>
            <td>{% if recipe.meal_dinner == True %} <i class="fas fa-check"></i> {% else %} <i
                class="fas fa-times error"></i>{% endif %}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <br>

</div>
<br>

<div class="container">
  <!-- Recipe ingredients -->
  <h4>Ingredients:</h4>
  <ul>
    {% for ingredient in ingredient_list %}
    <li>{{ ingredient.ingredient_desc }}</li>
    {% endfor %}
  </ul>
</div>

<br>
<br>

<div class="container">
  <!-- Recipe steps / method -->
  <h4>Method:</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Step</th>
        <th scope="col">Instructions</th>
      </tr>
    </thead>
    <tbody>
      {% for step in step_list %}
      <tr>
        <td>{{ step.step_order }}</td>
        <td>{{ step.step_desc }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>

<br>


<div class="container">
  <div class="form-group">
    <!-- Display button so that user can view recipe's source website -->
    <div class="row" style="padding-top: 20px;">
      <div class="form-group col-sm">
        <a href="https://{{ recipe.recipe_url }}" target="_blank" class="btn btn-primary btn-block">Source
          Website</a>
      </div>
    </div>

    <!-- Display button so that user can edit the recipe if they're the owner -->
    {% if owner_ind == True %}
    <div class="row" style="padding-top: 20px;">
      <div class="form-group col-sm">
        <a href="{{ url_for('edit_recipe', recipe_id=recipe.recipe_id) }}" class="btn btn-warning btn-block">Edit
          Recipe</a>
      </div>
    {% endif %}

    <!-- Display button so that user can upload an image if they're the owner -->
    {% if owner_ind == True %}
      <div class="form-group col-sm">
        <a href="{{ url_for('upload_image', recipe_id=recipe.recipe_id) }}" class="btn btn-warning btn-block">Upload
          Recipe Image</a>
      </div>
    {% endif %}

    <!-- Display button so that user can delete a recipe if they're the owner -->
    {% if owner_ind == True %}
      <div class="form-group col-sm">
        <form role="form" method='POST' id="delete_form" name="delete_form">
          <button type="submit" class="btn btn-danger btn-block" id="delete_submit" name="delete_submit" onclick="return confirm('Are you sure that you want to delete this recipe?');">Delete
            Recipe</button>
        </form>
      </div>
    </div>
    {% endif %}




  </div>
</div>
</div>
{% endblock %}

{% block footer %}
<script type="text/javascript" src="{{ url_for('static', filename='favorite.js') }}"></script>
{% endblock %}